# ν¬νΈ ν• λ‹Ήν‘

## π“‹ κ°μ”
μ‹¬ν… PCB Inspection AI ν”λ«νΌμ λ¨λ“  μ„λΉ„μ¤ ν¬νΈ ν• λ‹Ή μ •λ³΄

**μ—…λ°μ΄νΈ**: 2025-01-11

---

## π–¥οΈ Frontend
| μ„λΉ„μ¤           | ν¬νΈ  | ν”„λ΅ν† μ½ | μ„¤λ…                    |
|-----------------|-------|---------|------------------------|
| Frontend        | 3000  | HTTP    | Next.js UI             |

---

## π”§ Backend Services (κΈ°λ³Έ μ„λΉ„μ¤)

### Core Services
| μ„λΉ„μ¤           | ν¬νΈ  | ν”„λ΅ν† μ½ | μ„¤λ…                    | GPU  |
|-----------------|-------|---------|------------------------|------|
| Backend Core    | 8000  | HTTP    | FastAPI Core API       | -    |
| Analytics       | 8005  | HTTP    | λ¶„μ„/ν†µκ³„ μ„λΉ„μ¤         | -    |
| Monitoring      | 8006  | HTTP    | μ‹μ¤ν… λ¨λ‹ν„°λ§         | -    |

### AI/ML Services
| μ„λΉ„μ¤           | ν¬νΈ  | ν”„λ΅ν† μ½ | μ„¤λ…                    | GPU  |
|-----------------|-------|---------|------------------------|------|
| AI Inference    | 8001  | HTTP    | μ‹¤μ‹κ°„ μ¶”λ΅              | GPU 0|
| AI Training     | 8002  | HTTP    | λ¨λΈ ν•™μµ               | GPU 1|
| Image Synthesis | 8003  | HTTP    | GAN μ΄λ―Έμ§€ ν•©μ„±         | GPU 0|
| Image Search    | 8004  | HTTP    | λ²΅ν„° κ²€μƒ‰               | -    |

---

## π—„οΈ Data Infrastructure
| μΈν”„λΌ          | ν¬νΈ     | ν”„λ΅ν† μ½ | μ„¤λ…                    |
|-----------------|----------|---------|------------------------|
| PostgreSQL      | 5432     | TCP     | μ£Ό λ°μ΄ν„°λ² μ΄μ¤          |
| Redis           | 6379     | TCP     | μΊμ‹/λ©”μ‹μ§€ ν          |
| MinIO (API)     | 9000     | HTTP    | S3 νΈν™ κ°μ²΄ μ¤ν† λ¦¬μ§€    |
| MinIO (Console) | 9001     | HTTP    | MinIO κ΄€λ¦¬ UI           |
| Qdrant          | 6333     | HTTP    | λ²΅ν„° DB                 |

---

## π¤– ML Infrastructure
| μΈν”„λΌ          | ν¬νΈ  | ν”„λ΅ν† μ½ | μ„¤λ…                    |
|-----------------|-------|---------|------------------------|
| MLflow          | 5000  | HTTP    | μ‹¤ν— μ¶”μ /λ¨λΈ κ΄€λ¦¬      |

---

## π“ Observability
| μΈν”„λΌ          | ν¬νΈ     | ν”„λ΅ν† μ½ | μ„¤λ…                    |
|-----------------|----------|---------|------------------------|
| Prometheus      | 9090     | HTTP    | λ©”νΈλ¦­ μμ§‘             |
| Grafana         | 3001     | HTTP    | λ¨λ‹ν„°λ§ λ€μ‹λ³΄λ“        |
| Jaeger (UI)     | 16686    | HTTP    | λ¶„μ‚° μ¶”μ  UI            |
| Jaeger (Agent)  | 6831     | UDP     | Trace Agent             |

---

## π”® Future Services (ν–¥ν›„ μ¶”κ°€ μμ •)
| μ„λΉ„μ¤           | ν¬νΈ  | ν”„λ΅ν† μ½ | μ„¤λ…                    | μƒνƒ      |
|-----------------|-------|---------|------------------------|----------|
| AI Assistant    | 8007  | HTTP    | λ¶λ‰ μ§„λ‹¨ μ±—λ΄‡          | λ―Έκµ¬ν„    |
| RAG Service     | 8008  | HTTP    | λ¬Έμ„ κ²€μƒ‰               | λ―Έκµ¬ν„    |
| LLM Orchestrator| 8009  | HTTP    | LLM κ΄€λ¦¬                | λ―Έκµ¬ν„    |
| Auth Service    | 8010  | HTTP    | μΈμ¦ μ„λΉ„μ¤ (λ¶„λ¦¬ μ‹)   | λ―Έκµ¬ν„    |

---

## π§ κ°λ°μ© ν¬νΈ (μ¶©λ λ°©μ§€)

λ…λ¦½ κ°λ° μ‹ μ‚¬μ©ν•λ” ν¬νΈ (ν†µν•© μΈν”„λΌμ™€ μ¶©λ λ°©μ§€)

| μ„λΉ„μ¤          | κ°λ° ν¬νΈ    | ν”„λ΅λ•μ… ν¬νΈ |
|-----------------|-------------|--------------|
| PostgreSQL      | 5433        | 5432         |
| Redis           | 6380        | 6379         |
| MinIO           | 9010-9019   | 9000-9001    |

---

## π“ ν¬νΈ ν• λ‹Ή κ·μΉ™

### 3000λ²λ€
- 3000: Frontend (Next.js)
- 3001: Grafana

### 5000λ²λ€
- 5000: MLflow
- 5432: PostgreSQL
- 5672: RabbitMQ (ν–¥ν›„)

### 6000λ²λ€
- 6333: Qdrant
- 6379: Redis
- 6831: Jaeger Agent

### 8000λ²λ€ (Backend Services)
- 8000: Backend Core
- 8001: AI Inference
- 8002: AI Training
- 8003: Image Synthesis
- 8004: Image Search
- 8005: Analytics
- 8006: Monitoring
- 8007-8009: ν–¥ν›„ ν™•μ¥ (LLM Services)
- 8010+: μ¶”κ°€ μ„λΉ„μ¤

### 9000λ²λ€
- 9000: MinIO API
- 9001: MinIO Console
- 9090: Prometheus

### 16000λ²λ€
- 16686: Jaeger UI

---

## π”’ λ³΄μ• κ³ λ ¤μ‚¬ν•­

### μ™Έλ¶€ λ…Έμ¶ ν¬νΈ (ν”„λ΅λ•μ…)
```yaml
μ™Έλ¶€ μ ‘κ·Ό ν—μ©:
  - 80/443: API Gateway (Nginx)
  - 3000: Frontend (λλ” Gatewayλ¥Ό ν†µν•΄)

λ‚΄λ¶€ μ „μ©:
  - 5432: PostgreSQL
  - 6379: Redis
  - 8001-8006: Backend Services
  - λ¨λ“  μΈν”„λΌ ν¬νΈ
```

### λ°©ν™”λ²½ κ·μΉ™ μμ‹
```bash
# μ™Έλ¶€ μ ‘κ·Ό ν—μ©
firewall-cmd --add-port=80/tcp --permanent
firewall-cmd --add-port=443/tcp --permanent

# λ‚΄λ¶€ μ „μ© (νΉμ • IPλ§ ν—μ©)
firewall-cmd --add-rich-rule='rule family="ipv4" source address="10.0.0.0/8" port port="5432" protocol="tcp" accept' --permanent
```

---

## π“ μ°Έκ³ μ‚¬ν•­

1. **κ°λ° ν™κ²½**: λ¨λ“  ν¬νΈ localhostμ—μ„ μ ‘κ·Ό κ°€λ¥
2. **ν”„λ΅λ•μ… ν™κ²½**: API Gatewayλ¥Ό ν†µν•΄μ„λ§ μ™Έλ¶€ μ ‘κ·Ό
3. **GPU μ„λΉ„μ¤**: 8001, 8002, 8003λ§ GPU ν•„μ”
4. **μ¤μΌ€μΌλ§**: λ™μΌ μ„λΉ„μ¤ λ³µμ  μ‹ ν¬νΈλ” Dockerκ°€ μλ™ ν• λ‹Ή

---

**λ¬Έμ„ λ²„μ „**: 1.0
**μµμΆ… μ—…λ°μ΄νΈ**: 2025-01-11
